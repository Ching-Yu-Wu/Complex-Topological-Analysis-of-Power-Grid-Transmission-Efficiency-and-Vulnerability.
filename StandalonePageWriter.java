package ncku.topology.web;

import ncku.topology.config.ThymeLeafConfig;
import org.json.JSONObject;
import org.springframework.stereotype.Service;
import org.thymeleaf.TemplateEngine;
import org.thymeleaf.context.Context;
import java.io.FileWriter;
import java.io.IOException;
import java.io.Writer;

@Service
public class StandalonePageWriter {

  public void writer(String filename, String title, JSONObject jsondata) throws IOException {
    Context context = new Context();
    context.setVariable("title", title);
    context.setVariable("graphData", jsondata.toString());

    Writer writer = new FileWriter(filename);
    TemplateEngine templateEngine = ThymeLeafConfig.getTemplateEngine();
    String processedStr = templateEngine.process("force_directed.html", context);
    writer.write(processedStr);
    writer.close();
  }
}
